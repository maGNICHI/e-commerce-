{% extends "base.html" %}

{% block title %}Ajouter un Produit{% endblock %}

{% block header %}
    <h1>Ajouter un Produit</h1>
{% endblock %}

{% block content %}
<!-- Styles intégrés -->
<style>
    .form-container {
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 20px;
        background-color: #f9f9f9;
        width: 85%;
        margin: 20px auto;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .form-group {
        margin-bottom: 15px;
    }

    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #333;
    }

    .form-group input[type="text"],
    .form-group input[type="email"],
    .form-group textarea,
    .form-group select {
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 5px;
        width: 100%;
        box-sizing: border-box;
        font-size: 16px;
    }

    .form-group input[type="text"]:focus,
    .form-group input[type="email"]:focus,
    .form-group textarea:focus,
    .form-group select:focus {
        border-color: #66afe9;
        outline: none;
        box-shadow: 0 0 5px rgba(102, 175, 233, 0.5);
    }

    .error-message {
        color: red; /* Couleur du texte d'erreur */
        display: none; /* Masquer par défaut */
        margin-top: 5px; /* Espacement au-dessus du message d'erreur */
    }
</style>

<section class="content">
    <div class="form-container">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group">
                <label for="{{ form.title.id_for_label }}">Nom :</label>
                {{ form.title }}
                <div class="error-message" id="error-title">Champ requis</div> <!-- Message d'erreur -->
            </div>
            
            <div class="form-group">
                <label for="{{ form.price.id_for_label }}">Prix :</label>
                {{ form.price }}
                <div class="error-message" id="error-price">Champ requis</div> <!-- Message d'erreur -->
            </div>
            
            <div class="form-group">
                <label for="{{ form.description.id_for_label }}">Description :</label>
                {{ form.description }}
                <div class="error-message" id="error-description">Champ requis</div> <!-- Message d'erreur -->
            </div>
            
            <div class="form-group">
                <label for="{{ form.category.id_for_label }}">Catégorie :</label>
                {{ form.category }}
                <div class="error-message" id="error-category">Champ requis</div> <!-- Message d'erreur -->
            </div>

            <div class="form-group">
                <label for="{{ form.image.id_for_label }}">Image :</label>
                {{ form.image }}
                <div class="error-message" id="error-image">Champ requis</div> <!-- Message d'erreur -->
            </div>

            <button type="submit" class="btn btn-primary">Ajouter</button>

            <a href="/dashboard/produits/" class="btn btn-secondary" style="margin-top: 10px;">
                Retour à la liste des produits
            </a>
        </form>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const inputs = document.querySelectorAll('.form-group input, .form-group select, .form-group textarea');

        inputs.forEach(input => {
            input.addEventListener('blur', function() {
                if (!input.value) { // Vérifie si le champ est vide
                    document.getElementById('error-' + input.name).style.display = 'block'; // Affiche le message d'erreur
                } else {
                    document.getElementById('error-' + input.name).style.display = 'none'; // Masque le message d'erreur
                }
            });

            input.addEventListener('focus', function() {
                document.getElementById('error-' + input.name).style.display = 'none'; // Masque le message d'erreur lors du focus
            });
        });
    });
</script>
{% endblock %}
